<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="description" content="brief description" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deadlock Detection Using Resource Allocation Graph</title>
  <link rel="icon" href="images/vlab-logo.png" type="image/x-icon" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/harmonic16-dark.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</head>

<body>
  <header class="header">
    <div class="logo-container">
      <div class="logo">
        <a href="https://www.vlab.andcollege.du.ac.in" rel="noopener" target="_blank">
          <img class="logo-img" src="images/logo.png" alt="VLab" />
        </a>
      </div>
      <h1 class="vlab">V-Lab@ANDC</h1>
    </div>

    <div class="menu-toggle" onclick="toggleMenu()">☰</div>
    <nav class="nav-menu" id="small-screen">
      <div class="close-btn" onclick="toggleMenu()">✖</div>
      <a href="https://www.vlab.andcollege.du.ac.in">Home</a>
      <a href="https://www.vlab.andcollege.du.ac.in#labs_section">Labs</a>
      <a href="https://www.vlab.andcollege.du.ac.in#team">Team</a>
      <a href="https://www.andcollege.du.ac.in">College Website</a>
    </nav>
  </header>
  <button id="backToTop" title="Go to top" aria-label="Back to Top">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path
        d="M11 18.5c-.4-.1-1.3-.9-5.5-5.2-3.4-3.4-5.1-5.2-5.2-5.5-.2-.5-.2-1.0 0-1.4.3-.9 1.5-1.4 2.3-1 .1 0 2.2 2.1 4.7 4.5 2.5 2.5 4.5 4.5 4.7 4.5.3.1-.3.7 6.8-6.3 2.8-2.8 3-2.9 3.8-2.8 1.1.2 1.8 1.4 1.4 2.5-.2.5-10.1 10.3-10.7 10.6-.6.3-1.6.4-2.3.1z" />
    </svg>
  </button>



  <div class="yourvlabtitle">
    <h1>Deadlock Detection Using Resource Allocation Graph</h1>
  </div>

  <div class="pageview">
    <div class="sticky-trigger"></div>

    <div class="navigation-wrapper" id="navWrapper">
      <nav class="navigation">
        <div class="link" title="Aim" onclick="switchContent('aim')">
          <img class="icon" src="images/Aim_img.png" alt="Aim" />
          <span>Aim</span>
        </div>

        <div class="link"  title="Theory & Application" onclick="switchContent('theory')">
          <img class="icon" src="images/theory_img.png" alt="THEORY" />
          <span>Theory & Application</span>
        </div>

        <div class="link" title="Procedure" onclick="switchContent('procedure')">
          <img class="icon" src="images/procedure_img.png" alt="PROCEDURE" />
          <span>Procedure</span>
        </div>

        <div class="link" title="Practice" onclick="switchContent('practice')">
          <img class="icon" src="images/practice_img.png" alt="PRACTICE" />
          <span>Practice</span>
        </div>

        <div class="link" title="Codes" onclick="switchContent('code')">
          <img class="icon" src="images/code_img.png" alt="CODES" />
          <span>Codes</span>
        </div>

        <div class="link" title="Result" onclick="switchContent('result')">
          <img class="icon" src="images/result_img.png" alt="RESULT" />
          <span>Result</span>
        </div>

        <div class="link" title="Quiz" onclick="switchContent('quiz')">
          <img class="icon" src="images/quiz_img.png" alt="QUIZ" />
          <span>Quiz</span>
        </div>

        <div class="link" title="References" onclick="switchContent('references')">
          <img class="icon" src="images/reference_img.png" alt="REFERENCE" />
          <span>References</span>
        </div>
        
        <div class="link" title="Team & Tools" onclick="switchContent('tnt')">
          <img class="icon" src="images/tnt_img.png" alt="TEAM & TOOLS" />
          <span>Team & Tools</span>
        </div>
      </nav>
    </div>

    <section class="main_practical">
      <!-- Aim -->
      <div class="container" id="aim">
        <div class="title">Aim</div>
        <div class="content">
          <p>The objective of this virtual lab is to provide a comprehensive understanding of Resource Allocation Graphs (RAGs) and their usage for the allocation of resources to processes and to detect potential deadlocks for two conditions (hold-and-wait and circular-wait) through interactive simulation. RAG is explained with respect to its usage in resource allocation to processes maintained by the operating system
          </p>
        </div>
      </div>

      <!-- Theory & Applications -->
      <div class="container" id="theory">
        <div class="title">Theory & Applications</div>
        <div class="content">
          <b><span>Key Concepts</span></b>
            <ul>
            <li>Resource Allocation Graph (RAG)</li>
            <p>
              A type of directed graph with two types of nodes representing either processes or resources and arrows representing either allocation of a resource to a process (i.e. assignment edge), or the request by a process to access a resource resource (i.e. request edge), it is useful for visualising if a resource is free or in use, and which resources a process is requesting for.
            </p>
            <br>
            <li>Deadlock</li>
            <p>
              A deadlock is a situation where processes are stuck. This happens when a set of processes cannot acquire the resources, they need to complete their work because those resources are held by other processes, a circular path of such conditions in a RAG leads to a stuck situation
            </p>
            <br>
            <li>Finding Deadlock</li>
            <p>
              The procedure of finding a deadlock depends on whether the resources are single instance or multi-instance. Detection of deadlock in single instance scenario is straightforward, but gets complicated in case of multi-instance. Generally, it can be said that a deadlock may be present if the following 4 conditions are present in the RAG:
            </p>
                <ol style="list-style-type: upper-roman;">
                  <li><strong>Mutual Exclusion:</strong> Each resource can be held by only one process.</li>
                  <li><strong>No Preemption:</strong> Resources must be released manually from a process before being reassigned a request by another process.</li>
                  <li><strong>Hold and Wait:</strong> A process is already holding a resource while requesting same instance or another resource that is currently held.</li>
                  <li><strong>Circular Wait:</strong> A hold and wait condition occures in a circular form in the RAG</li>
                </ol>
            <br>
            </ul>
            <b><span>Applications of RAG in the Real World</span></b>
            <ol>
              <li>Server Load Balancing – To evenly distribute requests across available servers and avoid bottlenecks.</li>
              <li>Operating Systems – Managing process-resource allocation to detect and prevent deadlocks in CPU and memory usage.</li>
              <li>Database Management – Ensuring transaction scheduling doesn't lead to resource deadlocks.</li>
              <li>Cloud Resource Management – Allocating virtual machines and storage resources efficiently to various services.</li>
              <li>Traffic Systems – Coordinating traffic light resources and vehicle flows to prevent circular wait deadlocks.</li>
            </ol>
        </div>
      </div>

      <!-- Procedure -->
      <div class="container" id="procedure">
        <div class="title">Procedure</div>
        <div class="content">
          <p>Following two steps are followed to detect deadlocks in RAG:</p>
            <br>
            <ol>
              <li><span>Creating the RAG using the input given by the user:</span></li>
              <ul>
                <li>Enter the number of resources and specify the instances for each resource.</li>
                <li>Enter the number of processes to be included in RAG.</li>
                <li>To add a request edge, right-click on a process icon, then right-click on the resource it is requesting.</li>
                <li>To add an assignment edge, right-click on a resource icon, then right-click on the process that holds it.</li>
              </ul>
              <br>
              <li><span>Finding Deadlock in the Given Graph:</span></li><br>
                <p>Check for the following conditions to find potential deadlock:</p><br>
                <ol style="list-style-type: upper-roman;">
                  <li><strong>Hold and Wait:</strong> For each process, check if it is holding a resource while requesting same instance or another resource that is currently held. If true, the edge is highlighted in yellow. (toggle 'view hold & wait')</li>
                  <li><strong>Circular Wait:</strong> Use Depth First Search on each node to check for a cycle. If a cycle is found, the edge is highlighted in green. (toggle 'view circular wait')</li>
                </ol>
              </ol>
        </div>
      </div>

      <!-- Code -->
      <div class="container" id="code">
        <div class="title">Code</div>
        <p>Example programs</p>
        <div class="switch-container">
          <input class="togswt" type="radio" id="cppRadio" name="codeSwitch" checked />
          <label for="cppRadio">JavaScript</label>
        </div>

        <div class="code-blocks">
          <div id="cppCode" class="code-block active">
            <div class="code-content">
              <pre><code class="language-cpp">// JavaScript Code Example
// Node Structure: Defines the processes and resources in the system
        const nodes = [
            { id: 'P1', type: 'process' },
            { id: 'P2', type: 'process' },
            { id: 'R1.1', type: 'resource', group: 'R1' },
            { id: 'R1.2', type: 'resource', group: 'R1' },
            { id: 'R2.1', type: 'resource', group: 'R2' }
        ];

// Links Structure: Defines the relationships (edges) between processes and resources
        const links = [
            { source: 'P1', target: 'R1.1' },
            { source: 'R1.2', target: 'P2' },
            { source: 'P2', target: 'R2.1' }
        ];

// Function to detect all circular waits (causing deadlocks) and return involved edges
        function detectAllCycleEdges(links) {
            let visited = new Set();    // Tracks nodes that have been fully processed
            let stack = new Set();      // Tracks nodes in the current DFS recursion
            let edgeStack = [];         // Tracks the edges being traversed in the current DFS path
            let allCycleEdges = [];     // To store all the cycles detected
        
        // Helper function to perform Depth-First Search (DFS) to find cycles
            function dfs(node) {
                if (stack.has(node)) {
                    // Cycle found: return the edges involved in this cycle
                    allCycleEdges.push([...edgeStack]); // Save a copy of the current edge stack
                    return;
                }
                if (visited.has(node)) {
                    // Node has already been fully processed, skip it
                    return;
                }
        
                // Mark the node as visited and add to the current recursion stack
                visited.add(node);
                stack.add(node);
        
                // Traverse all outgoing edges from the current node
                for (let link of links) {
                    if (link.source === node) {
                        // Add the current edge to the edge stack
                        edgeStack.push(link);
                        dfs(link.target); // Continue DFS to the target node
                        // Backtrack: remove the edge from the stack if no cycle found
                        edgeStack.pop();
                    }
                }
                // Backtrack: remove the node from the recursion stack
                stack.delete(node);
            }
            // Start DFS from each node in nodes1
            for (let node of nodes) {
                dfs(node.id); // Perform DFS starting from the node's ID
            }
            return allCycleEdges; // Return all cycles found
        }

// Function to calculate hold-wait edges (potential deadlock scenarios)
        function calc_hold_wait_edges(){
            yellowLinks=[];//empty 
            for(let link of links){
                const sourceNode = nodes.find(node => node.id === link.source.id || node.id === link.source);
                const targetNode = nodes.find(node => node.id === link.target.id || node.id === link.target);
                if(sourceNode.type==="resource" && targetNode.type==="process"){//hold wait can only from resource to process and + process to another resource
                    for (let link1 of links){
                        if(link.target===link1.source){
                            for(let link2 of links){
                                if(link2.source===link1.target){
                                    yellowLinks.push(link)
                                    yellowLinks.push(link1)
                                }
                            }
                        }
                        
                    }
                }
                
            }
            console.log("Yellow_links calculated : " , yellowLinks);
        }

// Function to add a new process node
        function addNode(value) {
            const numberOfNodes = value;
            // Check if the input is a valid number
            if (isNaN(numberOfNodes) || numberOfNodes <= 0) {
                let message="Please Enter a Valid Number that is greater than 1";//althouh this is replaced by requird in form html
                show_message(message); 
                return;
            }
            
            for (let i = 0; i < numberOfNodes; i++) {
                const newNodeId = `P${nodes.filter((node) => node.type === "process").length + 1}`;
                const newNode = {
                    id: newNodeId,
                    type: "process",
                    x: width / 2,
                    y: height / 2,};
                nodes.push(newNode);
            }
            console.log("nodes : ", nodes);
            hide_addProcess()            //hide the form 
            renderGraph(); // Call renderGraph() once after adding all nodes
        }

// Function to add multiple resources (Adds m resource each having n resource instances)
            function addMultipleResources(value,value1) {
                let m = value;
                let n = value1
                // Validate inputs: Must be natural numbers (positive integers)
                if (isNaN(m) || isNaN(n) || m < 1 || n < 1 || !Number.isInteger(m) || !Number.isInteger(n)) {
                    let message="Please Enter a Valid Number that is greater than 1";//althouh this is replaced by requird in form html
                    show_message(message); 
                    return;
                }
                // Find the highest existing resource number
                const resourceNumbers = nodes
                    .filter(node => node.type === 'resource')
                    .map(node => parseInt(node.id.split('.')[0].substring(1)))
                    .filter(num => !isNaN(num));
            
                let startingResourceNumber = (resourceNumbers.length > 0 ? Math.max(...resourceNumbers) : 0) + 1;
            
                // Create m resources, each with n instances
                for (let i = 0; i < m; i++) {
                    let resourceNumber = startingResourceNumber + i;
            
                    for (let j = 1; j <= n; j++) {
                        const newResourceId = `R${resourceNumber}.${j}`;
                        const newResource = { id: newResourceId, type: 'resource', group: `R${resourceNumber}` };
                        nodes.push(newResource);
                    }
                }
                console.log("nodes:", nodes);
                renderGraph();
            }

// Function to add a new resource instance
        function addResourceInstance(value) {
            const resourceNumber =value;
            if (resourceNumber) {
                const existingResources = nodes.filter(node => 
                    node.type === 'resource' && node.id.startsWith(`R${resourceNumber}.`)
                );
                if (existingResources.length > 0) {
                    let maxNumber = 0;
                    nodes.forEach(node => {
                        if (node.type === "resource" && node.id.startsWith(`R${resourceNumber}.`)) {
                            let match = node.id.match(/R\d+\.(\d+)$/); // Extract only the last numeric part
                            if (match) {
                                let num = parseInt(match[1]); // Convert to number
                                maxNumber = Math.max(maxNumber, num);
                            }
                        }
                    });
                    const newInstanceNumber = maxNumber + 1;            
                    const newResourceId = `R${resourceNumber}.${newInstanceNumber}`;
                    const newResource = { id: newResourceId, type: 'resource', group: `R${resourceNumber}` };
                    nodes.push(newResource);
                    console.log("nodes : " , nodes);
                } else {
                    const newResourceId = `R${resourceNumber}.1`;
                    const newResource = { id: newResourceId, type: 'resource', group: `R${resourceNumber}` };
                    nodes.push(newResource);
                    console.log("nodes : " , nodes);
                }
                renderGraph();
            }
        }
                </code></pre>
              <button class="copy-button">Copy</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Practice -->
      <div class="container" id="practice">
        <div class="title">Practice</div>
        <!-- <div class="content"></div> -->
        <div class="content" id="practice_Content"><!--id="practice_Content"-->
            <div id="frameParent">
              <iframe src="project.html" frameborder="0" ></iframe><!--class="content" -->
            </div>
            <div class="right_pannel">
              <h1 class="instructionsN">Instructions to Use</h1>
              <p>1.<span class="bolder">Process:</span> Each Process node is represented by Circles and is numbered as P1,P2,P3 to Pn if the graph has ‘n’ Processes.</p>
              <p>2.<span class="bolder">Resource:</span> Each Resource is represented by a gray square box, with some resource-instances in them(orange boxes). A resource should have a minimum of 1 resource-instance. </p>
              <p>3.<span class="bolder">Resource-Instance:</span> Each Resource-Instance is represented by an orange square box, and are numbered as - if Resource 3 has ‘m’ resource instances all this will be numbered as 3.1,3.2,3.3,3.4 to 3.m  there is not any 3.0 possible.</p>
              <p>4.<span class="bolder">Selection:</span> Right-click on  any Process or Resource-Instance to select it. To de-select just right-click again.</p>
              <p>5.<span class="bolder">Drag/Movement:</span> Drag any  Process/Resource in the graph simulation, using left click.</p>
              <p>6.<span class="bolder">Assignment Edge Creation:</span> First right-click on any Resource-Instance and then right-click on any Process. This will create an assignment edge(Blue color) from that Resource-Instance to that Process.(<span class="bolder">Note:</span> a single resource-instance can’t be assigned to two different Processes, meaning there can’t be more than 1 assignment edges from a Resource-Instance.)</p>
              <p>7.<span class="bolder">Requesting Edge Creation:</span> First right-click on any Process and then right-click on any Resource-Instance, this will create a Requesting edge from that Process to that Resource-Instance.(<span class="bolder">Note:</span> a single Process can’t  request two different Resource-Instances of a single Resource, meaning there can’t be more than 1 Requesting edges from Process to single Resource.)</p>
              <p>8.<span class="bolder">Assignment/Requesting Edge deletion:</span> whether it is Assignment or requesting edge, to delete it  right click on its tail Process/Resource-Instance and then right-click on its head Process/resource-Instance.</p>
            </div>
        </div>
        <div id="Extra_instructions">
              <h1>Button functionalities</h1>
              <p>All the buttons provided below the graph simulation are used for following functionalities.</p>
              <p>Left click on any button to use its functionality.</p>
              <p>1.<span class="bolder">Add Processes:</span> Use to  add “n” number of processes into the  graph.</p>
              <p>2.<span class="bolder">Add Resources:</span> Use to add “r” number of resources with each having minimum “s” number of resource-instances.</p>
              <p>3.<span class="bolder">Add Resource-Instance:</span> Use this button to add 1 more Resource-Instance in any existing resource.</p>
              <p>4.<span class="bolder">View Hold-wait:</span> Left clicking on this button, will activate the Visualisation of Hold-wait condition in the graph. The edges in hold-wait condition will then be highlighted by yellow color.</p>
              <p>5.<span class="bolder">View Circular-wait:</span> Left clicking on this button, will activate the Visualisation of Circular-wait condition in the graph. The edges in circular-wait will then be highlighted by green color.</p>
              <p>6.<span class="bolder">Delete:</span> Left clicking on this button will activate deletion mode, after this right-click on any Process or Resource-Instance to delete them.</p>
              <p><span class="bolder">Notes:</span> Buttons having activation can be deactivated if  again left-click on the button.</p>
              <p>7.<span class="bolder">Reset:</span> Left click on this button to make the graph simulation empty or to delete everything.</p>
        </div>
      </div>

      <!-- Results -->
      <div class="container" id="result">
        <div class="title">Result</div>
        <div class="content">
          <!-- <p>From this we obdain the knowledge of what exactly deadlocks are, how they form and what is the importance of detectingn them</p> -->
          <br>
          <p>In this experiment, an interactive RAGE is created to simulate the allocation and request of resources by processes. The provision to add multiple processes, multiple resources with more than one instance allowed for realistic simulation of resource allocation within multiple processes in a system. The necessary conditions like  hold-and-wait and circular-wait are detected and shown visually for quick grasping of concepts related to deadlock detection
          </p>
          <br>
          <p>Through the graphical interface, occurrence of deadlock conditions are identified in real time. Furthermore, the provided simulation emphasized on the necessity of careful resource management and controlled request handling for preventing deadlock issues in concurrent systems.
          </p>
        </div>
      </div>


      <!-- Quiz -->
      <div class="container" id="quiz">
        <div class="title">Quiz</div>

        <!-- Quiz Instructions -->
        <div id="quiz-instructions">
          <h3>INSTRUCTIONS</h3>
          <ul>
            <li>There are 4 questions in total</li>
            <li>Read each question carefully before answering.</li>
            <li>Select the correct option(s) (multiple options CAN be correct).</li>
            <li>Click <b>Next</b> to move to the following question.</li>
            <li>At the end, you can view your quiz report and retake the quiz if needed.</li>
          </ul>
          <button id="start-quiz-btn" class="start-button">Start Quiz</button>
        </div>

        <!-- Quiz Questions Section (Initially Hidden) -->
        <div id="quiz-content" style="display: none;">
          <p id="question"></p>
          <div id="choices" class="choices"></div>
          <button id="next-btn" class="next-button" disabled>Next</button>
          <button id="retake-btn" style="display: none">Retake Quiz</button>
          <div id="quiz-report" style="display: none"></div>
        </div>

      </div>


      <!-- References -->
      <div class="container" id="references">
        <div class="title">References</div>
        <div class="content">
          <ul class="ref-list">
            <li>
                <span> <a href="https://www.geeksforgeeks.org/operating-systems/introduction-of-operating-system-set-1/">geeksforgeeks - operating system</a> </span>
              </li>
              <li>
                <span> <a href="https://www.geeksforgeeks.org/operating-systems/introduction-of-deadlock-in-operating-system/">geeksforgeeks - deadlock</a> </span>
              </li>
              <li>
                <span> <a href="//d3js.org/">d3js.org</a> </span>
              </li>
          </ul>
        </div>
      </div>

      <!-- Team & Tools -->
      <div class="container" id="tnt">
        <div class="title">Team & Tools</div>
        <div class="content">
          <h3>Students</h3>
          <ul class="ref-list">
            <li>
                <a href="https://github.com/SequencerBit" rel="noopener" target="_blank"><span>Jayesh Raj Neti</span></a>
            </li>
            <li>
              <a href="https://github.com/nitesh4456" rel="noopener" target="_blank"><span>Nitesh Verma</span></a>
            </li>
          </ul>
          <h3>Mentors</h3>
          <ul class="ref-list">
            <li><span>Professor Sharanjit kaur</span></li>
          </ul>
          <h3>Tools Used</h3>
          <ul class="tools-list">
            <li>
                <span>Vanilla HTML, CSS, JS - for creating the web page</span>
                <span>D3 - for graph simulation</span>
              </li>
          </ul>
        </div>
      </div>
    </section>
  </div>
  <script>
    hljs.highlightAll();
    function toggleMenu() {
      const menu = document.querySelector(".nav-menu");
      menu.classList.toggle("show");
    }
  </script>
  <script src="script.js"></script>
</body>

</html>