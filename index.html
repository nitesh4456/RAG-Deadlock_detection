<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="description" content="brief description" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deadlock Detection Using Resource Allocation Graph</title>
  <link rel="icon" href="images/vlab-logo.png" type="image/x-icon" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/harmonic16-dark.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</head>

<body>
  <header class="header">
    <div class="logo-container">
      <div class="logo">
        <a href="https://www.vlab.andcollege.du.ac.in" rel="noopener" target="_blank">
          <img class="logo-img" src="images/logo.png" alt="VLab" />
        </a>
      </div>
      <h1 class="vlab">V-Lab@ANDC</h1>
    </div>

    <div class="menu-toggle" onclick="toggleMenu()">☰</div>
    <nav class="nav-menu" id="small-screen">
      <div class="close-btn" onclick="toggleMenu()">✖</div>
      <a href="https://www.vlab.andcollege.du.ac.in">Home</a>
      <a href="https://www.vlab.andcollege.du.ac.in#labs_section">Labs</a>
      <a href="https://www.vlab.andcollege.du.ac.in#team">Team</a>
      <a href="https://www.andcollege.du.ac.in">College Website</a>
    </nav>
  </header>
  <button id="backToTop" title="Go to top" aria-label="Back to Top">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path
        d="M11 18.5c-.4-.1-1.3-.9-5.5-5.2-3.4-3.4-5.1-5.2-5.2-5.5-.2-.5-.2-1.0 0-1.4.3-.9 1.5-1.4 2.3-1 .1 0 2.2 2.1 4.7 4.5 2.5 2.5 4.5 4.5 4.7 4.5.3.1-.3.7 6.8-6.3 2.8-2.8 3-2.9 3.8-2.8 1.1.2 1.8 1.4 1.4 2.5-.2.5-10.1 10.3-10.7 10.6-.6.3-1.6.4-2.3.1z" />
    </svg>
  </button>



  <div class="yourvlabtitle">
    <h1>Deadlock Detection Using Resource Allocation Graph</h1>
  </div>

  <div class="pageview">
    <div class="sticky-trigger"></div>

    <div class="navigation-wrapper" id="navWrapper">
      <nav class="navigation">
        <div class="link" title="Aim" onclick="switchContent('aim')">
          <img class="icon" src="images/Aim_img.png" alt="Aim" />
          <span>Aim</span>
        </div>

        <div class="link"  title="Theory & Application" onclick="switchContent('theory')">
          <img class="icon" src="images/theory_img.png" alt="THEORY" />
          <span>Theory & Application</span>
        </div>

        <div class="link" title="Procedure" onclick="switchContent('procedure')">
          <img class="icon" src="images/procedure_img.png" alt="PROCEDURE" />
          <span>Procedure</span>
        </div>

        <div class="link" title="Practice" onclick="switchContent('practice')">
          <img class="icon" src="images/practice_img.png" alt="PRACTICE" />
          <span>Practice</span>
        </div>

        <div class="link" title="Codes" onclick="switchContent('code')">
          <img class="icon" src="images/code_img.png" alt="CODES" />
          <span>Codes</span>
        </div>

        <div class="link" title="Result" onclick="switchContent('result')">
          <img class="icon" src="images/result_img.png" alt="RESULT" />
          <span>Result</span>
        </div>

        <div class="link" title="Quiz" onclick="switchContent('quiz')">
          <img class="icon" src="images/quiz_img.png" alt="QUIZ" />
          <span>Quiz</span>
        </div>

        <div class="link" title="References" onclick="switchContent('references')">
          <img class="icon" src="images/reference_img.png" alt="REFERENCE" />
          <span>References</span>
        </div>
        <div class="link" title="Team & Tools" onclick="switchContent('tnt')">
          <img class="icon" src="images/tnt_img.png" alt="TEAM & TOOLS" />
          <span>Team & Tools</span>
        </div>
      </nav>
    </div>

    <section class="main_practical">
      <!-- Aim -->
      <div class="container" id="aim">
        <div class="title">Aim</div>
        <div class="content">
          <p>The objective of this experiment is to provide a comprehensive understanding of Resource Allocation Graphs (RAGs) and their usage in operating systems for allocation of resources to processes and to detect potential deadlocks. 
            </p>
            <br>
            <p>This simulation helps users visualize how resources and processes interact, and how deadlocks can be detected before they cause system failures. It serves as a practical tool to deepen one's understanding of deadlock detection mechanisms, which are crucial for designing robust, concurrent systems in operating systems and distributed computing environments.</P>
          </p>
        </div>
      </div>

      <!-- Theory & Applications -->
      <div class="container" id="theory">
        <div class="title">Theory & Applications</div>
        <div class="content">
          <span>Key Concepts</span>
            <ul>
            <li>Resource Allocation Graph (RAG):</li>
            <p>
              A type of Directed graph with nodes representing either programmes or resources and arrows representing either allocation of a resource to a programme, or the request by a programme to access a resource, it is useful in visualising which programme is holding and requesting which resource and which resource is being used or is free, it is also useful in determining if the condition of programmes and resources might result in a deadlock or not
            </p>
            <br>
            <li>Deadlock</li>

            <p>
              A deadlock is a situation where processes are stuck. This happens when a set of processes cannot acquire the resources they have requested because those resources are held by other processes, and those processes are, in turn, holding onto resources needed by the first set. This results in a scenario where no process can continue its execution.
            </p>
            <br>
            <li>Finding Deadlock</li>
            <p>
              The procedure of finding a deadlock depends on whether the resources are single instance or multi-instance. Since in our case we assume the resources are multiple instance, finding deadlock is more difficult, but generally, we can say that a deadlock may be present if the given 4 conditions are present in the RAG:
            </p>
            <br>
            </ul>

            <span>Applications in the Real World</span>
            <ol>
              <li>Server Load Balancing – Using RAGs to evenly distribute requests across available servers and avoid bottlenecks.</li>
              <li>Operating Systems – Managing process-resource allocation to detect and prevent deadlocks in CPU and memory usage.</li>
              <li>Database Management – Ensuring transaction scheduling doesn’t lead to resource deadlocks.</li>
              <li>Cloud Resource Management – Allocating virtual machines and storage resources efficiently to various services.</li>
              <li>Traffic Systems – Coordinating traffic light resources and vehicle flows to prevent circular wait deadlocks.</li>
            </ol>
        </div>
      </div>

      <!-- Procedure -->
      <div class="container" id="procedure">
        <div class="title">Procedure</div>
        <div class="content">
          <p>
              The procedure to this lab would be done in a two-step way:
            </p>
            <br>
            <ol>
              <li><span>Creating the RAG using the input given by the user:</span></li>
              <ul>
                <li>Enter the number of resources and specify the instances for each resource.</li>
                <li>Enter the number of processes to include in the graph.</li>
                <li>To add a Request edge, right-click on a process, then right-click on the resource it is requesting.</li>
                <li>To add an Assignment edge, right-click on a resource, then right-click on the process that holds it.</li>
              </ul>
              <br>
              <li><span>Finding Deadlock in the Given Graph:</span></li><br>
                <p>Check for the four necessary conditions for deadlock:</p><br>
                <ul>
                  <li><strong>Mutual Exclusion:</strong> Each resource can be held by only one process. (This is always true.)</li>
                  <li><strong>No Preemption:</strong> Resources must be released manually before being reassigned. (This is also always true.)</li>
                  <li><strong>Hold and Wait:</strong> For each process, check if it is holding a resource while requesting another that is currently held. If true, the edge is highlighted in yellow. (toggle 'view hold & wait')</li>
                  <li><strong>Circular Wait:</strong> Use DFS on each node to check for a cycle. If a cycle is found, the edge is highlighted in green. (toggle 'view circular wait')</li>
                </ul>
              </ol>
            <p>
              Finally, we would have not only found what the RAG for the given programme and resources in the given condition is but also found if the graph results in a deadlock or not.
            </p>
        </div>
      </div>

      <!-- Code -->
      <div class="container" id="code">
        <div class="title">Code</div>
        <p>Example programs</p>
        <div class="switch-container">
          <input class="togswt" type="radio" id="cppRadio" name="codeSwitch" checked />
          <label for="cppRadio">JavaScript</label>
        </div>

        <div class="code-blocks">
          <div id="cppCode" class="code-block active">
            <div class="code-content">
              <pre><code class="language-cpp">// JavaScript Code Example
// Node Structure: Defines the processes and resources in the system
        const nodes = [
            { id: 'P1', type: 'process' },
            { id: 'P2', type: 'process' },
            { id: 'R1.1', type: 'resource', group: 'R1' },
            { id: 'R1.2', type: 'resource', group: 'R1' },
            { id: 'R2.1', type: 'resource', group: 'R2' }
        ];

// Links Structure: Defines the relationships (edges) between processes and resources
        const links = [
            { source: 'P1', target: 'R1.1' },
            { source: 'R1.2', target: 'P2' },
            { source: 'P2', target: 'R2.1' }
        ];

// Function to detect all circular waits (causing deadlocks) and return involved edges
        function detectAllCycleEdges(links) {
            let visited = new Set();    // Tracks nodes that have been fully processed
            let stack = new Set();      // Tracks nodes in the current DFS recursion
            let edgeStack = [];         // Tracks the edges being traversed in the current DFS path
            let allCycleEdges = [];     // To store all the cycles detected
        
        // Helper function to perform Depth-First Search (DFS) to find cycles
            function dfs(node) {
                if (stack.has(node)) {
                    // Cycle found: return the edges involved in this cycle
                    allCycleEdges.push([...edgeStack]); // Save a copy of the current edge stack
                    return;
                }
                if (visited.has(node)) {
                    // Node has already been fully processed, skip it
                    return;
                }
        
                // Mark the node as visited and add to the current recursion stack
                visited.add(node);
                stack.add(node);
        
                // Traverse all outgoing edges from the current node
                for (let link of links) {
                    if (link.source === node) {
                        // Add the current edge to the edge stack
                        edgeStack.push(link);
                        dfs(link.target); // Continue DFS to the target node
                        // Backtrack: remove the edge from the stack if no cycle found
                        edgeStack.pop();
                    }
                }
                // Backtrack: remove the node from the recursion stack
                stack.delete(node);
            }
            // Start DFS from each node in nodes1
            for (let node of nodes) {
                dfs(node.id); // Perform DFS starting from the node's ID
            }
            return allCycleEdges; // Return all cycles found
        }

// Function to calculate hold-wait edges (potential deadlock scenarios)
        function calc_hold_wait_edges(){
            yellowLinks=[];//empty 
            for(let link of links){
                const sourceNode = nodes.find(node => node.id === link.source.id || node.id === link.source);
                const targetNode = nodes.find(node => node.id === link.target.id || node.id === link.target);
                if(sourceNode.type==="resource" && targetNode.type==="process"){//hold wait can only from resource to process and + process to another resource
                    for (let link1 of links){
                        if(link.target===link1.source){
                            for(let link2 of links){
                                if(link2.source===link1.target){
                                    yellowLinks.push(link)
                                    yellowLinks.push(link1)
                                }
                            }
                        }
                        
                    }
                }
                
            }
            console.log("Yellow_links calculated : " , yellowLinks);
        }

// Function to add a new process node
        function addNode(value) {
            const numberOfNodes = value;
            // Check if the input is a valid number
            if (isNaN(numberOfNodes) || numberOfNodes <= 0) {
                let message="Please Enter a Valid Number that is greater than 1";//althouh this is replaced by requird in form html
                show_message(message); 
                return;
            }
            
            for (let i = 0; i < numberOfNodes; i++) {
                const newNodeId = `P${nodes.filter((node) => node.type === "process").length + 1}`;
                const newNode = {
                    id: newNodeId,
                    type: "process",
                    x: width / 2,
                    y: height / 2,};
                nodes.push(newNode);
            }
            console.log("nodes : ", nodes);
            hide_addProcess()            //hide the form 
            renderGraph(); // Call renderGraph() once after adding all nodes
        }

// Function to add multiple resources (Adds m resource each having n resource instances)
            function addMultipleResources(value,value1) {
                let m = value;
                let n = value1
                // Validate inputs: Must be natural numbers (positive integers)
                if (isNaN(m) || isNaN(n) || m < 1 || n < 1 || !Number.isInteger(m) || !Number.isInteger(n)) {
                    let message="Please Enter a Valid Number that is greater than 1";//althouh this is replaced by requird in form html
                    show_message(message); 
                    return;
                }
                // Find the highest existing resource number
                const resourceNumbers = nodes
                    .filter(node => node.type === 'resource')
                    .map(node => parseInt(node.id.split('.')[0].substring(1)))
                    .filter(num => !isNaN(num));
            
                let startingResourceNumber = (resourceNumbers.length > 0 ? Math.max(...resourceNumbers) : 0) + 1;
            
                // Create m resources, each with n instances
                for (let i = 0; i < m; i++) {
                    let resourceNumber = startingResourceNumber + i;
            
                    for (let j = 1; j <= n; j++) {
                        const newResourceId = `R${resourceNumber}.${j}`;
                        const newResource = { id: newResourceId, type: 'resource', group: `R${resourceNumber}` };
                        nodes.push(newResource);
                    }
                }
                console.log("nodes:", nodes);
                renderGraph();
            }

// Function to add a new resource instance
        function addResourceInstance(value) {
            const resourceNumber =value;
            if (resourceNumber) {
                const existingResources = nodes.filter(node => 
                    node.type === 'resource' && node.id.startsWith(`R${resourceNumber}.`)
                );
                if (existingResources.length > 0) {
                    let maxNumber = 0;
                    nodes.forEach(node => {
                        if (node.type === "resource" && node.id.startsWith(`R${resourceNumber}.`)) {
                            let match = node.id.match(/R\d+\.(\d+)$/); // Extract only the last numeric part
                            if (match) {
                                let num = parseInt(match[1]); // Convert to number
                                maxNumber = Math.max(maxNumber, num);
                            }
                        }
                    });
                    const newInstanceNumber = maxNumber + 1;            
                    const newResourceId = `R${resourceNumber}.${newInstanceNumber}`;
                    const newResource = { id: newResourceId, type: 'resource', group: `R${resourceNumber}` };
                    nodes.push(newResource);
                    console.log("nodes : " , nodes);
                } else {
                    const newResourceId = `R${resourceNumber}.1`;
                    const newResource = { id: newResourceId, type: 'resource', group: `R${resourceNumber}` };
                    nodes.push(newResource);
                    console.log("nodes : " , nodes);
                }
                renderGraph();
            }
        }
                </code></pre>
              <button class="copy-button">Copy</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Practice -->
      <div class="container" id="practice">
        <div class="title">Practice</div>
        <!-- <div class="content"></div> -->
        <div class="content" id="practice_Content"><!--id="practice_Content"-->
            <div id="frameParent">
              <iframe src="project.html" frameborder="0" ></iframe><!--class="content" -->
            </div>
            <div class="right_pannel">
              <h1>Instructions to Use</h1>
              <p>Circles represents Processes and Squares represents Resource-Instances</p>
              <img src="./images/Process.png" alt="resouce select" class="Select"><img src="./images/Resource.png" alt="process select" class="Select">
              <p>To select/de-select a Process/Resource-Instance, just right click on it.The selected element will be highlighted with green.</p>
              <img src="./images/process_select.png" alt="process select" class="Select"><img src="./images/resource_select.png" alt="process select" class="Select">
              <p>To create an Edge, first select a Process/Resource-Instance and then select another Process/Resource-Instance(Edge will be created)</p>
              <p><img src="./images/Edge1.png" alt="resouce->process" class="Edge">is Assignment Edge</p>
              <p><img src="./images/Edge2.png" alt="process->resoucre" class="Edge">is Resquest Edge</p>
              <p>Trying to re-create existing edge, will delete it.(Selection should be as is existing edge, select the tail first and then the head of edge)</p>
              <img src="./images/Delete1.png" alt="resouce select" class="Edge">
              <img src="./images/Delete2.png" alt="process select" class="Edge">
              <p>
                Two views are defined "View Hold-Wait" and "View Circular-Wait", both are of main conditions for a deadlock to occur.
              </p>
              <p>To delete a Process/Resource-Instance right click on it after clicking Toggle Delete button.</p>
              <p id=bolder>"Each button’s label reflects its functionality"</p>
            </div>
          </div>
      </div>

      <!-- Results -->
      <div class="container" id="result">
        <div class="title">Result</div>
        <div class="content">
          <!-- <p>From this we obdain the knowledge of what exactly deadlocks are, how they form and what is the importance of detectingn them</p> -->
          <br>
          <p>In this experiment, you created and interacted with a Resource Allocation Graph (RAG) to simulate the allocation and request of resources by processes. By adding multiple processes, resources, and resource instances, and visualizing their interactions, you observed how certain conditions-such as hold-and-wait and circular-wait can lead to a deadlock.
          </p>
          <br>
          <p>Through the graphical interface, you were able to identify where these deadlock conditions occurred in real time. This helped reinforce your understanding of how system deadlocks form and how they can be detected using RAG. You also learned how careful resource management and request handling are crucial to avoiding such issues in concurrent systems.
          </p>
        </div>
      </div>


      <!-- Quiz -->
      <div class="container" id="quiz">
        <div class="title">Quiz</div>

        <!-- Quiz Instructions -->
        <div id="quiz-instructions">
          <h3>ADD YOUR INSTRUCTIONS HERE</h3>
          <ul>
            <li>Read each question carefully before answering.</li>
            <li>Select the correct option(s).</li>
            <li>Click <b>Next</b> to move to the following question.</li>
            <li>At the end, you can view your quiz report and retake the quiz if needed.</li>
          </ul>
          <button id="start-quiz-btn" class="start-button">Start Quiz</button>
        </div>

        <!-- Quiz Questions Section (Initially Hidden) -->
        <div id="quiz-content" style="display: none;">
          <p id="question"></p>
          <div id="choices" class="choices"></div>
          <button id="next-btn" class="next-button" disabled>Next</button>
          <button id="retake-btn" style="display: none">Retake Quiz</button>
          <div id="quiz-report" style="display: none"></div>
        </div>

      </div>


      <!-- References -->
      <div class="container" id="references">
        <div class="title">References</div>
        <div class="content">
          <ul class="ref-list">
            <li>
                <span> <a href="https://www.geeksforgeeks.org/operating-systems/introduction-of-operating-system-set-1/">geeksforgeeks - operating system</a> </span>
              </li>
              <li>
                <span> <a href="https://www.geeksforgeeks.org/operating-systems/introduction-of-deadlock-in-operating-system/">geeksforgeeks - deadlock</a> </span>
              </li>
              <li>
                <span> <a href="//d3js.org/">d3js.org</a> </span>
              </li>
          </ul>
        </div>
      </div>

      <!-- Team & Tools -->
      <div class="container" id="tnt">
        <div class="title">Team & Tools</div>
        <div class="content">
          <h3>Students</h3>
          <ul class="ref-list">
            <li>
                <a href="https://github.com/SequencerBit" rel="noopener" target="_blank"><span>Jayes Raj Neti</span></a>
            </li>
            <li>
              <a href="https://github.com/nitesh4456" rel="noopener" target="_blank"><span>Nitesh Verma</span></a>
            </li>
          </ul>
          <h3>Mentors</h3>
          <ul class="ref-list">
            <li><span>Professor Sharanjit kaur</span></li>
          </ul>
          <h3>Tools Used</h3>
          <ul class="tools-list">
            <li>
                <span>Vanilla HTML, CSS, JS - for creating the web page</span>
                <span>D3 - for graph simulation</span>
              </li>
          </ul>
        </div>
      </div>
    </section>
  </div>
  <script>
    hljs.highlightAll();
    function toggleMenu() {
      const menu = document.querySelector(".nav-menu");
      menu.classList.toggle("show");
    }
  </script>
  <script src="script.js"></script>
</body>

</html>